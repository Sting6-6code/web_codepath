<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="boss-title">Boss Details | Boss Battle Guide</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="container">
      <nav>
        <a href="/" class="back-link">‚Üê Back to Boss List</a>
      </nav>

      <article id="boss-details" class="boss-detail">
        <div class="loading">Loading boss details...</div>
      </article>

      <footer>
        <small>
          <p>
            ¬© 2024 Boss Battle Guide - Created by Siting Wang for CodePath
            WEB103
          </p>
        </small>
      </footer>
    </main>

    <script>
      // Get boss ID from URL
      const pathParts = window.location.pathname.split("/");
      const bossId = pathParts[pathParts.length - 1];

      // Fetch and display boss details
      fetch(`/api/bosses/${bossId}`)
        .then((response) => {
          if (!response.ok) {
            throw new Error("Boss not found");
          }
          return response.json();
        })
        .then((boss) => {
          document.getElementById(
            "boss-title"
          ).textContent = `${boss.name} | Boss Battle Guide`;

          const difficultyClass = boss.difficulty
            .toLowerCase()
            .replace(" ", "-");

          document.getElementById("boss-details").innerHTML = `
          <header class="boss-header">
            <h1>${boss.name}</h1>
            <span class="difficulty-badge ${difficultyClass}">${
            boss.difficulty
          }</span>
          </header>
          
          <div class="boss-content-detail">
            <div class="boss-detail-image">
              <img src="${boss.image}" alt="${boss.name}" />
            </div>
            
            <div class="boss-info">
              <div class="info-section">
                <h3>üìç Location</h3>
                <p>${boss.location}</p>
              </div>
              
              <div class="info-section">
                <h3>‚ù§Ô∏è Health Points</h3>
                <p>${boss.health.toLocaleString()} HP</p>
              </div>
              
              <div class="info-section">
                <h3>üìñ Description</h3>
                <p>${boss.description}</p>
              </div>
              
              <div class="info-section">
                <h3>‚öîÔ∏è Battle Strategy</h3>
                <p>${boss.strategy}</p>
              </div>
              
              <div class="info-section">
                <h3>üíé Victory Rewards</h3>
                <ul>
                  ${boss.rewards.map((reward) => `<li>${reward}</li>`).join("")}
                </ul>
              </div>
              
              <div class="weakness-resistance">
                <div class="weaknesses">
                  <h4>üéØ Weaknesses</h4>
                  <ul>
                    ${boss.weaknesses
                      .map(
                        (weakness) => `<li class="weakness">${weakness}</li>`
                      )
                      .join("")}
                  </ul>
                </div>
                
                <div class="resistances">
                  <h4>üõ°Ô∏è Resistances</h4>
                  <ul>
                    ${boss.resistances
                      .map(
                        (resistance) =>
                          `<li class="resistance">${resistance}</li>`
                      )
                      .join("")}
                  </ul>
                </div>
              </div>
            </div>
          </div>
        `;
        })
        .catch((error) => {
          console.error("Error loading boss:", error);
          document.getElementById("boss-details").innerHTML = `
          <div class="error">
            <h2>‚ùå Boss Not Found</h2>
            <p>The boss you're looking for doesn't exist in our database.</p>
            <a href="/" role="button">Return to Boss List</a>
          </div>
        `;
        });
    </script>
  </body>
</html>
